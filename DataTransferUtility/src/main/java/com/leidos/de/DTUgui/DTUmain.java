/**
 *                                  Apache License
 *                            Version 2.0, January 2004
 *                         http://www.apache.org/licenses/
 *
 *    TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION
 *
 *    1. Definitions.
 *
 *       "License" shall mean the terms and conditions for use, reproduction,
 *       and distribution as defined by Sections 1 through 9 of this document.
 *
 *       "Licensor" shall mean the copyright owner or entity authorized by
 *       the copyright owner that is granting the License.
 *
 *       "Legal Entity" shall mean the union of the acting entity and all
 *       other entities that control, are controlled by, or are under common
 *       control with that entity. For the purposes of this definition,
 *       "control" means (i) the power, direct or indirect, to cause the
 *       direction or management of such entity, whether by contract or
 *       otherwise, or (ii) ownership of fifty percent (50%) or more of the
 *       outstanding shares, or (iii) beneficial ownership of such entity.
 *
 *       "You" (or "Your") shall mean an individual or Legal Entity
 *       exercising permissions granted by this License.
 *
 *       "Source" form shall mean the preferred form for making modifications,
 *       including but not limited to software source code, documentation
 *       source, and configuration files.
 *
 *       "Object" form shall mean any form resulting from mechanical
 *       transformation or translation of a Source form, including but
 *       not limited to compiled object code, generated documentation,
 *       and conversions to other media types.
 *
 *       "Work" shall mean the work of authorship, whether in Source or
 *       Object form, made available under the License, as indicated by a
 *       copyright notice that is included in or attached to the work
 *       (an example is provided in the Appendix below).
 *
 *       "Derivative Works" shall mean any work, whether in Source or Object
 *       form, that is based on (or derived from) the Work and for which the
 *       editorial revisions, annotations, elaborations, or other modifications
 *       represent, as a whole, an original work of authorship. For the purposes
 *       of this License, Derivative Works shall not include works that remain
 *       separable from, or merely link (or bind by name) to the interfaces of,
 *       the Work and Derivative Works thereof.
 *
 *       "Contribution" shall mean any work of authorship, including
 *       the original version of the Work and any modifications or additions
 *       to that Work or Derivative Works thereof, that is intentionally
 *       submitted to Licensor for inclusion in the Work by the copyright owner
 *       or by an individual or Legal Entity authorized to submit on behalf of
 *       the copyright owner. For the purposes of this definition, "submitted"
 *       means any form of electronic, verbal, or written communication sent
 *       to the Licensor or its representatives, including but not limited to
 *       communication on electronic mailing lists, source code control systems,
 *       and issue tracking systems that are managed by, or on behalf of, the
 *       Licensor for the purpose of discussing and improving the Work, but
 *       excluding communication that is conspicuously marked or otherwise
 *       designated in writing by the copyright owner as "Not a Contribution."
 *
 *       "Contributor" shall mean Licensor and any individual or Legal Entity
 *       on behalf of whom a Contribution has been received by Licensor and
 *       subsequently incorporated within the Work.
 *
 *    2. Grant of Copyright License. Subject to the terms and conditions of
 *       this License, each Contributor hereby grants to You a perpetual,
 *       worldwide, non-exclusive, no-charge, royalty-free, irrevocable
 *       copyright license to reproduce, prepare Derivative Works of,
 *       publicly display, publicly perform, sublicense, and distribute the
 *       Work and such Derivative Works in Source or Object form.
 *
 *    3. Grant of Patent License. Subject to the terms and conditions of
 *       this License, each Contributor hereby grants to You a perpetual,
 *       worldwide, non-exclusive, no-charge, royalty-free, irrevocable
 *       (except as stated in this section) patent license to make, have made,
 *       use, offer to sell, sell, import, and otherwise transfer the Work,
 *       where such license applies only to those patent claims licensable
 *       by such Contributor that are necessarily infringed by their
 *       Contribution(s) alone or by combination of their Contribution(s)
 *       with the Work to which such Contribution(s) was submitted. If You
 *       institute patent litigation against any entity (including a
 *       cross-claim or counterclaim in a lawsuit) alleging that the Work
 *       or a Contribution incorporated within the Work constitutes direct
 *       or contributory patent infringement, then any patent licenses
 *       granted to You under this License for that Work shall terminate
 *       as of the date such litigation is filed.
 *
 *    4. Redistribution. You may reproduce and distribute copies of the
 *       Work or Derivative Works thereof in any medium, with or without
 *       modifications, and in Source or Object form, provided that You
 *       meet the following conditions:
 *
 *       (a) You must give any other recipients of the Work or
 *           Derivative Works a copy of this License; and
 *
 *       (b) You must cause any modified files to carry prominent notices
 *           stating that You changed the files; and
 *
 *       (c) You must retain, in the Source form of any Derivative Works
 *           that You distribute, all copyright, patent, trademark, and
 *           attribution notices from the Source form of the Work,
 *           excluding those notices that do not pertain to any part of
 *           the Derivative Works; and
 *
 *       (d) If the Work includes a "NOTICE" text file as part of its
 *           distribution, then any Derivative Works that You distribute must
 *           include a readable copy of the attribution notices contained
 *           within such NOTICE file, excluding those notices that do not
 *           pertain to any part of the Derivative Works, in at least one
 *           of the following places: within a NOTICE text file distributed
 *           as part of the Derivative Works; within the Source form or
 *           documentation, if provided along with the Derivative Works; or,
 *           within a display generated by the Derivative Works, if and
 *           wherever such third-party notices normally appear. The contents
 *           of the NOTICE file are for informational purposes only and
 *           do not modify the License. You may add Your own attribution
 *           notices within Derivative Works that You distribute, alongside
 *           or as an addendum to the NOTICE text from the Work, provided
 *           that such additional attribution notices cannot be construed
 *           as modifying the License.
 *
 *       You may add Your own copyright statement to Your modifications and
 *       may provide additional or different license terms and conditions
 *       for use, reproduction, or distribution of Your modifications, or
 *       for any such Derivative Works as a whole, provided Your use,
 *       reproduction, and distribution of the Work otherwise complies with
 *       the conditions stated in this License.
 *
 *    5. Submission of Contributions. Unless You explicitly state otherwise,
 *       any Contribution intentionally submitted for inclusion in the Work
 *       by You to the Licensor shall be under the terms and conditions of
 *       this License, without any additional terms or conditions.
 *       Notwithstanding the above, nothing herein shall supersede or modify
 *       the terms of any separate license agreement you may have executed
 *       with Licensor regarding such Contributions.
 *
 *    6. Trademarks. This License does not grant permission to use the trade
 *       names, trademarks, service marks, or product names of the Licensor,
 *       except as required for reasonable and customary use in describing the
 *       origin of the Work and reproducing the content of the NOTICE file.
 *
 *    7. Disclaimer of Warranty. Unless required by applicable law or
 *       agreed to in writing, Licensor provides the Work (and each
 *       Contributor provides its Contributions) on an "AS IS" BASIS,
 *       WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
 *       implied, including, without limitation, any warranties or conditions
 *       of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
 *       PARTICULAR PURPOSE. You are solely responsible for determining the
 *       appropriateness of using or redistributing the Work and assume any
 *       risks associated with Your exercise of permissions under this License.
 *
 *    8. Limitation of Liability. In no event and under no legal theory,
 *       whether in tort (including negligence), contract, or otherwise,
 *       unless required by applicable law (such as deliberate and grossly
 *       negligent acts) or agreed to in writing, shall any Contributor be
 *       liable to You for damages, including any direct, indirect, special,
 *       incidental, or consequential damages of any character arising as a
 *       result of this License or out of the use or inability to use the
 *       Work (including but not limited to damages for loss of goodwill,
 *       work stoppage, computer failure or malfunction, or any and all
 *       other commercial damages or losses), even if such Contributor
 *       has been advised of the possibility of such damages.
 *
 *    9. Accepting Warranty or Additional Liability. While redistributing
 *       the Work or Derivative Works thereof, You may choose to offer,
 *       and charge a fee for, acceptance of support, warranty, indemnity,
 *       or other liability obligations and/or rights consistent with this
 *       License. However, in accepting such obligations, You may act only
 *       on Your own behalf and on Your sole responsibility, not on behalf
 *       of any other Contributor, and only if You agree to indemnify,
 *       defend, and hold each Contributor harmless for any liability
 *       incurred by, or claims asserted against, such Contributor by reason
 *       of your accepting any such warranty or additional liability.
 *
 *    END OF TERMS AND CONDITIONS
 *
 *    APPENDIX: How to apply the Apache License to your work.
 *
 *       To apply the Apache License to your work, attach the following
 *       boilerplate notice, with the fields enclosed by brackets "{}"
 *       replaced with your own identifying information. (Don't include
 *       the brackets!)  The text should be enclosed in the appropriate
 *       comment syntax for the file format. We also recommend that a
 *       file or class name and description of purpose be included on the
 *       same "printed page" as the copyright notice for easier
 *       identification within third-party archives.
 *
 *    Copyright {yyyy} {name of copyright owner}
 *
 *    Licensed under the Apache License, Version 2.0 (the "License");
 *    you may not use this file except in compliance with the License.
 *    You may obtain a copy of the License at
 *
 *        http://www.apache.org/licenses/LICENSE-2.0
 *
 *    Unless required by applicable law or agreed to in writing, software
 *    distributed under the License is distributed on an "AS IS" BASIS,
 *    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *    See the License for the specific language governing permissions and
 *    limitations under the License.
 */
package com.leidos.de.DTUgui;

import  org.apache.pdfbox.PDFReader;
import javax.swing.Action;
import javax.swing.plaf.basic.BasicFileChooserUI;
import javax.swing.ToolTipManager;
import javax.swing.KeyStroke;
import java.awt.event.InputEvent;
import javax.swing.BorderFactory;
import javax.swing.border.Border;
import javax.swing.border.TitledBorder;
import javax.swing.border.EtchedBorder;
import java.awt.BorderLayout;

import javax.swing.plaf.ComponentUI;
import javax.swing.plaf.TabbedPaneUI;
import javax.swing.plaf.basic.BasicTabbedPaneUI;
import javax.swing.SwingUtilities;
import java.awt.Toolkit;


import javax.swing.JDialog;
import java.awt.Color;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Font;
import java.awt.FontMetrics;
import java.awt.GradientPaint;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GridLayout;
import java.awt.Image;
import java.awt.Insets;
import java.awt.Polygon;
import java.awt.Rectangle;
import java.awt.Toolkit;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.image.BufferedImage;
import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.FileReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.ObjectInputStream;
import java.io.ObjectOutput;
import java.io.ObjectOutputStream;
import java.io.PrintWriter;
import java.net.MalformedURLException;
import java.net.Socket;
import java.net.SocketTimeoutException;
import java.net.URL;
import java.net.UnknownHostException;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Enumeration;
import java.util.HashMap;
import java.util.Properties;
import java.util.Vector;

import javax.swing.BorderFactory;
import javax.swing.Box;
import javax.swing.DefaultCellEditor;
import javax.swing.Icon;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JComponent;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JPasswordField;
import javax.swing.JPopupMenu;
import javax.swing.JProgressBar;
import javax.swing.JScrollPane;
import javax.swing.JTabbedPane;
import javax.swing.JTable;
import javax.swing.JTextArea;
import javax.swing.JTextField;
import javax.swing.JTextPane;
import javax.swing.SpringLayout;
import javax.swing.UIDefaults;
import javax.swing.UIManager;
import javax.swing.border.BevelBorder;
import javax.swing.border.Border;
import javax.swing.border.LineBorder;
import javax.swing.border.MatteBorder;
import javax.swing.border.SoftBevelBorder;
import javax.swing.border.TitledBorder;
import javax.swing.filechooser.FileNameExtensionFilter;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableCellEditor;

import com.deleidos.rtws.splitter.SplitterFactory;
import com.leidos.de.DTU.JMSUploader;
import com.leidos.de.DTU.UploadStatus;
import com.seaglasslookandfeel.painter.AbstractRegionPainter;

public class DTUmain extends javax.swing.JFrame {


    //  final JTable table_DLQMsg = new JTable(dataValuesDLQMsg, columnNamesDLQMsg);
    // private final JTable table_DLQMsg = null;
    private static final char[] CTRL_DOWN_MASK = null;
    private String[] types = SplitterFactory.getSplitterTypes();
    private JFrame frame;
    private JTextField textField_1;
    private JTextField textField_2;
    private JTable table_Datafiles;
    private JTable table_Parameters;
    private JTable table_TargetHosts;
    private static Integer SystemCounter;
    private static Integer TabCounter;
    private JTextField textField_4;
    private JTable table;
    private JScrollPane scrollPane;
    private JTextField txtUsername;
    private JTextField txtFromDirectory;
    private JTextField txtLocalDirectory;
    private JPasswordField passwordField;
    private Integer dataValuesSizeDataFiles = 0;
    private Integer dataValuesSizeTargets = 0;
    private Vector<DTUelements> dtueV = new Vector<DTUelements>();
	
    private static ArrayList<String> dataArrayList = new ArrayList<String>();
    private final JComboBox cBoxKeystore = new JComboBox();
    private static JTextPane logArea = new JTextPane();
    private static JTextPane logAreaDLQ = new JTextPane();
    private static JTextPane logAreaDLQMsg = new JTextPane();
    private static HashMap<String,String> DLQHashMap = new HashMap<String,String>();
    //private MouseListener popupListenerC = new PopupListenerC();


    // @@ old save state
    private HashMap<String, String> stateSaveHM = new HashMap();

    // @@ new save state
    // private Vector<Object> storedConfigContainerV = new Vector<Object>();
    private StoreObjectConfig storedOCfg = new StoreObjectConfig();
    private StoreObjectConfig storedOCfgRest = new StoreObjectConfig();
    DTUelements dtue = new DTUelements();
    private static String DLQfield = new String();
    DTUmain dtuMainRef = null;
		
	
    public static void main(String[] args) {

	try {
	    // UIManager.setLookAndFeel("javax.swing.plaf.metal.MetalLookAndFeel");
	    UIManager.setLookAndFeel("com.seaglasslookandfeel.SeaGlassLookAndFeel");

	} catch (Throwable e) {
	    e.printStackTrace();
	}
	EventQueue.invokeLater(new Runnable() {
		public void run() {
		    try {
			DTUmain window = new DTUmain();
			window.frame.setVisible(true);
			window.frame.setTitle("Digital Edge Data Transfer Utility Beta");
			

		    } catch (Exception e) {
			e.printStackTrace();
		    }
		}
	    });
    }




    /**
     * Create the application.
     */
    public DTUmain() {
	initialize();
	dtue.addDTUmainRef(this);	
	//dtuMainRef = this;

	QueueListener ql = new QueueListener();
	ql.addDTUmainRef(this);
	//add method for starting/stopping ql later not at creation
	//add method for pushing DLQ target list into QL later also

    }


    public void updateDLQ(String DLQfieldIN) {
	DLQfield = DLQfield+"\n"+DLQfieldIN; 
    }



    public void updateDLQds(HashMap DLQHashMapIN) {
	DLQHashMap = DLQHashMapIN;
	if(DLQHashMap.size() > 0) {

    }
}


    private void initialize() {
	frame = new JFrame();
	frame.setBounds(100, 100, 640, 445);
	frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);



	final JPopupMenu popupMenu = new JPopupMenu();
	final JTabbedPane tabbedPane = new JTabbedPane(JTabbedPane.TOP);
	final JTabbedPane tabbedPaneB = new JTabbedPane(JTabbedPane.TOP);

	frame.getContentPane().add(tabbedPane, BorderLayout.CENTER);

	Properties systemProps = System.getProperties();
	System.out.println(systemProps);

	System.setProperties(systemProps);
	System.setProperty("awt.useSystemAAFontSettings","on");
	System.setProperty("swing.aatext", "true");
	//	System.setProperty("awt.toolkit", "com.leidos.de.DTUgui.windowsToolkit");

	Properties systemPropsB = System.getProperties();
	System.out.println(systemPropsB);

	SystemCounter = 0;
	TabCounter = 0;

		    final String columnNamesDLQMsg[] = { "Message ID","Correlation ID","Timestamp","Destination" };
		    //	final String dataValuesDLQMsg[][] = new String[15][10];
		    final String dataValuesDLQMsg[][] = {
			{ "", "","","" }
		    };
				
	//table_DLQMsg = new JTable(dataValuesDLQMsg, columnNamesDLQMsg);
   	final JTable table_DLQMsg = new JTable(dataValuesDLQMsg, columnNamesDLQMsg);


	System.out.println(frame.getLocation());
System.out.println("frame.getLocation()");


	class PopupListenerC extends MouseAdapter {
	    JTable table;
	    JTable table_Datafiles;
	    String dataVal[][];
	    HashMap<String,String> DLQHashMap;
	    boolean lMousePress = false;
	    boolean rMousePress = false;

	    public void addDataTable(JTable table_DatafilesIN) {
		table_Datafiles = table_DatafilesIN;
	    }

	    public void addDataHM(HashMap DLQHashMapIN ) {
		 DLQHashMap = DLQHashMapIN;
	    }

	    public void mouseExited(MouseEvent e) { }
	    public void mouseMoved(MouseEvent e) {
		int columnA = table_Datafiles.columnAtPoint( e.getPoint() );
		int rowA = table_Datafiles.rowAtPoint( e.getPoint() );
		if(( table_Datafiles.getValueAt(rowA,columnA)).toString().length() > 0 ) {
		    //@@ table_Datafiles.setToolTipText((String) table_Datafiles.getValueAt(rowA,columnA));
		}
	    }
	    public void mouseEntered(MouseEvent e) {
		// ToolTipManager.sharedInstance().setDismissDelay(1600);
		ToolTipManager.sharedInstance().setInitialDelay(100);
		int columnA = table_Datafiles.columnAtPoint( e.getPoint() );
		int rowA = table_Datafiles.rowAtPoint( e.getPoint() );
		//table_Datafiles.setToolTipText( table_Datafiles.getCellRect(rowA,columnA, true).toString());
		    try {
		if((table_Datafiles.getValueAt(rowA,columnA))!=null) {
		    //if(( table_Datafiles.getValueAt(rowA,columnA)) != null) {
		    table_Datafiles.setToolTipText((String) table_Datafiles.getValueAt(rowA,columnA));
		}
		    } catch (ArrayIndexOutOfBoundsException eN) {

		    }



	    }

	    public void mousePressed(MouseEvent e) {
	//	showPopup(e);
		if(SwingUtilities.isLeftMouseButton(e) ) {
		    //if ((e.getButton() == MouseEvent.BUTTON1 && e.getClickCount() == 1) && (e.getButton() == MouseEvent.BUTTON2 && e.getClickCount()==1 )) { 
		    System.out.println("left mouse button");
		    int row = table_Datafiles.rowAtPoint( e.getPoint() );
		    int column = table_Datafiles.columnAtPoint( e.getPoint() );
		    System.out.println(row +" "+column); 
		   //@@@stop delete ((DefaultTableModel)table_Datafiles.getModel()).removeRow(row);
		  //logAreaDLQMsg.setText((String) table_Datafiles.getValueAt(rowA,columnA));
		  //logAreaDLQMsg.setText
			String keyA = ((String) table_Datafiles.getValueAt(row,column));
                        String valueA =(String)DLQHashMap.get(keyA);
			
 	   	for (String key : DLQHashMap.keySet()) {
                        String value = (String)DLQHashMap.get(key);
				if(key.equals(keyA)) {
		   	   logAreaDLQMsg.setText(key+" "+value); 
				}
                        }

		    table_Datafiles.revalidate();
		}
	    }

	}// end popup class

	final MouseListener popupListenerC = new PopupListenerC();
	((PopupListenerC) popupListenerC).addDataTable(table_DLQMsg);	
	((PopupListenerC) popupListenerC).addDataHM(DLQHashMap);
	table_DLQMsg.addMouseListener(popupListenerC);
	table_DLQMsg.getTableHeader().addMouseListener(popupListenerC);



	class PopupListener extends MouseAdapter {
	    JTable table;
	    String dataVal[][];
	    boolean lMousePress = false;
	    boolean rMousePress = false;

	    public void addDataValues(String dataValB[][]) {
		dataVal = dataValB;
	    }

	    public void mouseExited(MouseEvent e) { }
	    public void mouseMoved(MouseEvent e) {
		int columnA = table_Datafiles.columnAtPoint( e.getPoint() );
		int rowA = table_Datafiles.rowAtPoint( e.getPoint() );
		if(( table_Datafiles.getValueAt(rowA,columnA)).toString().length() > 0 ) {
		    //@@ table_Datafiles.setToolTipText((String) table_Datafiles.getValueAt(rowA,columnA));
		}
	    }

	    public void mouseEntered(MouseEvent e) {
		// ToolTipManager.sharedInstance().setDismissDelay(1600);
		ToolTipManager.sharedInstance().setInitialDelay(100);
		int columnA = table_Datafiles.columnAtPoint( e.getPoint() );
		int rowA = table_Datafiles.rowAtPoint( e.getPoint() );
		//table_Datafiles.setToolTipText( table_Datafiles.getCellRect(rowA,columnA, true).toString());

		try {
		if((table_Datafiles.getValueAt(rowA,columnA))!=null) {
		    //if(( table_Datafiles.getValueAt(rowA,columnA)) != null) {
		    table_Datafiles.setToolTipText((String) table_Datafiles.getValueAt(rowA,columnA));
		}
		  } catch (ArrayIndexOutOfBoundsException e3) {
                        // TODO Auto-generated catch block
                    //    e3.printStackTrace();
                    }






	    }

	    public void mousePressed(MouseEvent e) {
	//	showPopup(e);
		//if(SwingUtilities.isLeftMouseButton(e) ) {
		if(SwingUtilities.isRightMouseButton(e) ) {
		    //if ((e.getButton() == MouseEvent.BUTTON1 && e.getClickCount() == 1) && (e.getButton() == MouseEvent.BUTTON2 && e.getClickCount()==1 )) { 
		    System.out.println("left mouse button");
		    int row = table_Datafiles.rowAtPoint( e.getPoint() );
		    int column = table_Datafiles.columnAtPoint( e.getPoint() );
		// JOptionPane.showMessageDialog(null,"Key store not found", "Configuration Error", JOptionPane.ERROR_MESSAGE);

    		String[] options = new String[] {"Delete Row", "Add Row", "Cancel"};

		//JOptionPane jop = new JOptionPane();
    		//int selection = JOptionPane.showOptionDialog(null, "", "Add/Delete Datafile Source", JOptionPane.DEFAULT_OPTION, JOptionPane.PLAIN_MESSAGE, null, options, options[0]);
    		int selection = JOptionPane.showOptionDialog(null, "Add/Delete datafile location", "Add/Delete", JOptionPane.DEFAULT_OPTION, JOptionPane.PLAIN_MESSAGE, null, options, options[0]);
		
		System.out.println(selection+"=selection");
		if(selection==1) {
		//@@@showPopup(e);
		System.out.println(selection+"=ssselection");

                    popupMenu.show(e.getComponent(), e.getX(), e.getY());
                    UIManager.put("FileChooser.readOnly", Boolean.TRUE);
                    JDialog.setDefaultLookAndFeelDecorated(true);
                    JFileChooser chooser = new JFileChooser();
                    chooser.setCurrentDirectory(new File(new String(System.getProperty("user.dir"))));
                    chooser.setFileSelectionMode(JFileChooser.FILES_AND_DIRECTORIES);
                    FileNameExtensionFilter filter = new FileNameExtensionFilter( "logs,csv,db,json", "log", "csv", "db", "json");
                    chooser.setFileFilter(filter);
                    int returnVal = chooser.showOpenDialog(textField_1);

                    if (returnVal == JFileChooser.APPROVE_OPTION) {
                        System.out.println(chooser.getSelectedFile().getName());

                        String valueAdded = (String) chooser.getSelectedFile().getAbsolutePath();

			int numRows = 0;
			  numRows = ((DefaultTableModel)table_Datafiles.getModel()).getRowCount();
                        ((DefaultTableModel)table_Datafiles.getModel()).insertRow(numRows, new Object[]{valueAdded});
                      //  ((DefaultTableModel)table_Datafiles.getModel()).insertRow(0, new Object[]{valueAdded});
                        table_Datafiles.revalidate();
                    }
		}
		if(selection==0) {
		    ((DefaultTableModel)table_Datafiles.getModel()).removeRow(row);
		}
		
		    table_Datafiles.revalidate();
		}
	    }
	    public void mouseReleased(MouseEvent e) {
		//showPopup(e);
	    }

	    private void showPopup(MouseEvent e) {
		if (e.isPopupTrigger()) {
		    popupMenu.show(e.getComponent(), e.getX(), e.getY());
		    UIManager.put("FileChooser.readOnly", Boolean.TRUE); 
		    JDialog.setDefaultLookAndFeelDecorated(true);
		    JFileChooser chooser = new JFileChooser();
		    chooser.setCurrentDirectory(new File(new String(System.getProperty("user.dir"))));
		    chooser.setFileSelectionMode(JFileChooser.FILES_AND_DIRECTORIES);
		    FileNameExtensionFilter filter = new FileNameExtensionFilter( "logs,csv,db,json", "log", "csv", "db", "json");
		    chooser.setFileFilter(filter);
		    int returnVal = chooser.showOpenDialog(textField_1);
		
			
		    if (returnVal == JFileChooser.APPROVE_OPTION) {
			System.out.println(chooser.getSelectedFile().getName());
			int row = table_Datafiles.rowAtPoint( e.getPoint() );
			int column = table_Datafiles.columnAtPoint( e.getPoint() );
					
			String valueAdded = (String) chooser.getSelectedFile().getAbsolutePath();
			((DefaultTableModel)table_Datafiles.getModel()).insertRow(0, new Object[]{valueAdded});
			table_Datafiles.revalidate();
		    }

		}
	    }

	}// end popup class

	class PopupListenerB extends MouseAdapter {
	    JTable table;
	    String dataVal[][];
	    int datacounter = 0;
//	    JTable table_TargetHosts;
	    //boolean lMousePress = false;
	    //boolean rMousePress = false;
/*
	    public void addDataTable(JTable table_TargetHostsIN) {
	table_TargetHosts = table_TargetHostsIN;
	    }
*/
	    public void addDataValues(String dataValB[][]) {
		dataVal = dataValB;
	    }

	    public void mousePressed(MouseEvent e) {
                if(SwingUtilities.isRightMouseButton(e) ) {
                    System.out.println("left mouse button");
                    int row = table_TargetHosts.rowAtPoint( e.getPoint() );
                    int column = table_TargetHosts.columnAtPoint( e.getPoint() );

                String[] options = new String[] {"Delete Row", "Add Row", "Cancel"};

                //@@int selection = JOptionPane.showOptionDialog(null, "Add/Delete datafile location", "Add/Delete", JOptionPane.DEFAULT_OPTION, JOptionPane.PLAIN_MESSAGE, null, options, options[0]);
                int selection = JOptionPane.showOptionDialog(null, "Add/Delete Target IP or Hostname", "Add/Delete", JOptionPane.DEFAULT_OPTION, JOptionPane.PLAIN_MESSAGE, null, options, options[0]);

                System.out.println(selection+"=selection");
                if(selection==1) {
		//showPopup(e);
		displayPopUp();

                }
                if(selection==0) {
                    ((DefaultTableModel)table_TargetHosts.getModel()).removeRow(row);
                }

                    table_TargetHosts.revalidate();
                }
		//showPopup(e);
	    }

	    public void mouseReleased(MouseEvent e) {
		//showPopup(e);
	    }

	    private void showPopup(MouseEvent e) {
		if (e.isPopupTrigger()) {
		    dataValuesSizeTargets++;
		    table_TargetHosts.revalidate();


		String[] options = new String[] {"Delete Row", "Add Row", "Cancel"};

                //JOptionPane jop = new JOptionPane();
                //int selection = JOptionPane.showOptionDialog(null, "", "Add/Delete Datafile Source", JOptionPane.DEFAULT_OPTION, JOptionPane.PLAIN_MESSAGE, null, options, options[0]);
                int selection = JOptionPane.showOptionDialog(null, "Add/Delete Target IP or Hostname", "Add/Delete", JOptionPane.DEFAULT_OPTION, JOptionPane.PLAIN_MESSAGE, null, options, options[0]);

                System.out.println(selection+"=selection");
                if(selection==1) {
               // showPopup(e);
		displayPopUp();
                System.out.println(selection+"=ssselection");
		}
		    //displayPopUp();
		}
	    }

	    public void displayPopUp() {
		JTextField field1 = new JTextField(
						   "ip or hostname of JMS queue");
		JTextField field2 = new JTextField("port of JMS queue");
		// JPanel panelPopUp = new JPanel(new GridLayout(0, 1));

		JPanel panelPopUp = new JPanel();

		// panelPopUp.add(new JLabel("ip or hostname of JMS queue"));
		panelPopUp.add(field1);
		int result = JOptionPane.showConfirmDialog(null, panelPopUp,
							   "JMS queue selection", JOptionPane.OK_CANCEL_OPTION,
							   JOptionPane.PLAIN_MESSAGE);
		if (result == JOptionPane.OK_OPTION) {
		    System.out.println(" " + field1.getText() + " " + field2.getText());
		  //  dataVal[datacounter][0] = (String) field1.getText();
		  //  datacounter++;

                        String valueAdded = (String) field1.getText();
		     int numRows = 0;
                          numRows = ((DefaultTableModel)table_TargetHosts.getModel()).getRowCount();
                        ((DefaultTableModel)table_TargetHosts.getModel()).insertRow(numRows, new Object[]{valueAdded});
                      //  ((DefaultTableModel)table_Datafiles.getModel()).insertRow(0, new Object[]{valueAdded});
                        table_Datafiles.revalidate();




		} else {
		    System.out.println("Cancelled");
		}
	    }

	}// end popup class/



    /**
     * Initialize the contents of the frame.
     */

	String columnNamesDatafiles[] = { "Datafiles" };
	String columnNamesParameters[] = { "Parameter", "Setting" };
	String columnNamesTargetHosts[] = { "Target Hosts" };

	final String dataValuesParameters[][] = { { "input-format", "read" },
						  { "base64Encode", "false" }, { "record-format", "TEXTLINE" },
						  { "record header lines", "1" }, { "batch size", "100" },
						  { "listen on DLQ", "false" }, { "Process Zip Files", "true" }, { "interactive option", "false" } };

	// datafiles
	//final String dataValuesDatafiles[][] = new String[15][10];
	final String dataValuesDatafiles[][] = null;
	// target
	//final String dataValuesTargetHosts[][] = new String[15][10];
	final String dataValuesTargetHosts[][] = null;

	//@@dataValuesDatafiles[0][0] = "right click to add datafiles";
	//@@dataValuesTargetHosts[0][0] = "right click to add targethosts";

	JButton btnAddsystemB = new JButton("SaveSession");
	btnAddsystemB.addActionListener(new ActionListener() {
		public void actionPerformed(ActionEvent e) {

		    cBoxKeystore.addItem(dataArrayList.get(0));

/*
		    String myPath = "/home/craig2/keystore/";
		    File folder = new File(myPath);
		    File[] listOfFiles = folder.listFiles();
		    for (int i = 0; i < listOfFiles.length; i++) {
			cBoxKeystore.addItem(listOfFiles[i].getName());
		    }
    File folder = new File(keystorePath);
        //File[] listOfFiles = folder.listFiles();
        File[] listOfFiles = folder.listFiles(new FilenameFilter() {
                public boolean accept(File folder, String filename) {
                    return filename.toLowerCase().endsWith(".ks");
                }
            } );
        for (int i = 0; i < listOfFiles.length; i++) {
            cBoxKeystore.addItem(listOfFiles[i].getName());
            System.out.println(listOfFiles + "");
        }


*/





		}
	    });

	final JPanel panelRoot = new JPanel();

	tabbedPane.setUI(new javax.swing.plaf.metal.MetalTabbedPaneUI() {

	
		@Override
		    protected void installDefaults() {
		    super.installDefaults();
		    highlight = Color.decode("#7fa8ce");
		    lightHighlight = Color.decode("#7fa8ce");
		    shadow = Color.gray;
		    darkShadow = Color.black;
		    focus = Color.decode("#7fa8ce");
		}
		// tabbedPane.setFont(new Font("Calibri", Font.BOLD, 11));

	    });
	//		tabbedPane.putClientProperty(SwingUtilities.AA_TEXT_PROPERTY_KEY, new Boolean(true));
	//tabbedPane.setFont(new Font("Arial", Font.PLAIN, 12));
	//tabbedPane.setForeground(Color.decode("#7fa8ce"));
	//java.awt.Graphics.setRenderingHint("KEY_ANTIALIASING", "VALUE_ANTIALIAS_ON");
	//graphics2D.setRenderingHint( RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_ON);
	UIManager.put("TabbedPaneUI","javax.swing.plaf.metal.MetalTabbedPaneUI");
	System.setProperty("awt.useSystemAAFontSettings","on");
	System.setProperty("swing.aatext", "true");

	tabbedPane.addTab("NewSession", null, panelRoot, null);
	panelRoot.setLayout(null);

	SystemCounter = tabbedPane.getTabCount() - 1;
	// panel.setBounds(0, 0, 640, 445);

	JPanel panel_Q1 = new JPanel();
	panel_Q1.setBounds(310, 7, 310, 171);
	panelRoot.add(panel_Q1);
	panel_Q1.setLayout(null);

	JPanel panel_Q2 = new JPanel();

	panel_Q2.setBounds(10, 7, 302, 360);
	panelRoot.add(panel_Q2);
	panel_Q2.setLayout(null);

	final ArrayList<TableCellEditor> editors = new ArrayList<TableCellEditor>(
										  1);

	String[] columnNamesDrop1 = { "Type", "Value" };
	JComboBox comboBox1 = new JComboBox(columnNamesDrop1);
	DefaultCellEditor dce1 = new DefaultCellEditor(comboBox1);
	editors.add(dce1);

	String[] columnNamesDrop2 = { "Type", "Value" };
	JComboBox comboBox2 = new JComboBox(columnNamesDrop2);
	DefaultCellEditor dce2 = new DefaultCellEditor(comboBox2);
	editors.add(dce2);

	// String[] columnNamesDrop3 = {"CSV","Value"};
	// String[] columnNamesDrop3 = {"CSV","Value"};
	JComboBox comboBox3 = new JComboBox(types);
	DefaultCellEditor dce3 = new DefaultCellEditor(comboBox3);
	editors.add(dce3);

	table_Parameters = new JTable(dataValuesParameters, columnNamesParameters);

	final DefaultTableModel model = new DefaultTableModel( dataValuesParameters, columnNamesParameters);
	JTable table_Parameters = new JTable(model) {
		private static final long serialVersionUID = 1L;

		// Determine editor to be used by row
		public TableCellEditor getCellEditor(int row, int column) {
		    int modelColumn = convertColumnIndexToModel(column);

		    if (modelColumn == 1 && row == 2)
			return editors.get(row);
		    // return (TableCellEditor)editors.get(row);
		    else
			return super.getCellEditor(row, column);
		}
	    };


	table_Parameters.revalidate();


	table_Parameters.setBounds(12, 18, 219, 102);
	table_Parameters.setPreferredScrollableViewportSize(new Dimension(12, 18));
	table_Parameters.setFillsViewportHeight(true);

	JScrollPane scrollPaneParameters = new JScrollPane(table_Parameters);
	// scrollPaneParameters.setBounds(1, 170, 278, 167);
	scrollPaneParameters.setBounds(1, 170, 278, 167);
	// scrollPaneParameters.setEnabled(false);
	// scrollPaneParameters.setOpaque(true);
	scrollPaneParameters.setViewportBorder(new SoftBevelBorder( BevelBorder.LOWERED, null, null, null, null));

	panel_Q2.add(scrollPaneParameters);

	//table_Datafiles = new JTable(dataValuesDatafiles, columnNamesDatafiles);
	table_Datafiles = new JTable(dataValuesDatafiles, columnNamesDatafiles);
	//table_Datafiles = new JTable();
	final DefaultTableModel table_DatafilesModel = new DefaultTableModel(dataValuesDatafiles, columnNamesDatafiles);
	table_Datafiles.setModel(table_DatafilesModel);

	// table_Datafiles.setBorder(new MatteBorder(1, 1, 1, 1, (Color) new
	// Color(0, 0, 0)));
	//@@@@	table_Datafiles.setToolTipText("right click to add datafiles, left click to delete");
	// table_Datafiles.setBounds(1, 12, 219, 1604);
	table_Datafiles.setBounds(1, 12, 200, 604);
	// table.setBounds(12, 18, 219, 102);
	table_Datafiles.setPreferredScrollableViewportSize(new Dimension(12, 18));
	table_Datafiles.setFillsViewportHeight(true);

	MouseListener popupListener = new PopupListener();
	((PopupListener) popupListener).addDataValues(dataValuesDatafiles);

	// add the listener specifically to the header
	table_Datafiles.addMouseListener(popupListener);
	table_Datafiles.getTableHeader().addMouseListener(popupListener);

	table_Datafiles.setPreferredScrollableViewportSize(new Dimension(12, 18));
	table_Datafiles.setFillsViewportHeight(true);

	JScrollPane scrollPaneDatafiles = new JScrollPane(table_Datafiles);
	scrollPaneDatafiles.setViewportBorder(new SoftBevelBorder( BevelBorder.LOWERED, null, null, null, null));
	//scrollPaneDatafiles.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
	//		scrollPaneDatafiles.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);


	scrollPaneDatafiles.setBounds(0, 0, 278, 167);
	// scrollPaneDatafiles.setBounds(0, 0, 278, 152);
	// scrollPaneDatafiles.setBounds(0, 1, 278, 167);
	panel_Q2.add(scrollPaneDatafiles);
	// scrollPaneDatafiles.setEnabled(false);
	// scrollPaneDatafiles.setOpaque(true);

	scrollPaneDatafiles.setViewportBorder(new SoftBevelBorder( BevelBorder.LOWERED, null, null, null, null));
	// scrollPaneDatafiles.setVisible(true);
	// scrollPaneParameters.setVisible(true);
	scrollPaneDatafiles.setToolTipText("click to add datafiles");
	// scrollPaneDatafiles.setEnabled(false);
	scrollPaneDatafiles.setOpaque(true);

	textField_2 = new JTextField();
	textField_2.setBounds(3, 18, 265, 19);

	textField_2.setToolTipText("add target host");
	textField_2.setText("target host");
	textField_2.setColumns(10);

	table_TargetHosts = new JTable(dataValuesTargetHosts, columnNamesTargetHosts);
 
        final DefaultTableModel table_TargetHostsModel = new DefaultTableModel(dataValuesTargetHosts, columnNamesTargetHosts);
        table_TargetHosts.setModel(table_TargetHostsModel);

//       table_Datafiles = new JTable(dataValuesDatafiles, columnNamesDatafiles);
 //       //table_Datafiles = new JTable();
   //     final DefaultTableModel table_DatafilesModel = new DefaultTableModel(dataValuesDatafiles, columnNamesDatafiles);
    //    table_Datafiles.setModel(table_DatafilesModel);




	table_TargetHosts.setToolTipText("right click to add target host, left click to delete");
	table_TargetHosts.setBounds(1, 12, 200, 604);

	table_TargetHosts.setPreferredScrollableViewportSize(new Dimension(12,
									   18));
	table_TargetHosts.setFillsViewportHeight(true);

	// //table mouse listener

	MouseListener popupListenerB = new PopupListenerB();
//	((PopupListenerB) popupListenerB).addDataTable(table_TargetHosts);	
	((PopupListenerB) popupListenerB).addDataValues(dataValuesTargetHosts);
	// add the listener specifically to the header
	table_TargetHosts.addMouseListener(popupListenerB);
	table_TargetHosts.getTableHeader().addMouseListener(popupListenerB);


	JScrollPane scrollPaneTargetHosts = new JScrollPane(table_TargetHosts);
	scrollPaneTargetHosts.setBounds(0, 0, 278, 167);
	// scrollPaneTargetHosts.setBounds(0, 0, 294, 153);
	scrollPaneTargetHosts.setViewportBorder(new SoftBevelBorder(
								    BevelBorder.LOWERED, null, null, null, null));
	panel_Q1.add(scrollPaneTargetHosts);

	scrollPaneTargetHosts.setVisible(true);

	textField_4 = new JTextField();
	textField_4.setToolTipText("specify session name");
	textField_4.setBounds(11, 3, 204, 17);
	// panel.add(textField_4);
	textField_4.setColumns(10);

	JButton button_1 = new JButton("...");
	button_1.setBounds(217, 3, 41, 16);
	JPanel panel_4 = new JPanel();

	panel_4.setBounds(314, 192, 310, 188);
	panelRoot.add(panel_4);
	panel_4.setLayout(null);

	JPanel panel_Q4 = new JPanel();
	panel_Q4.setBounds(0, 0, 306, 157);

	Border border = BorderFactory.createBevelBorder(0, Color.LIGHT_GRAY,Color.gray);
	panel_Q4.setBorder(border);

	panelRoot.add(panel_Q4);
	panel_Q4.setLayout(null);
	panel_Q4.setBounds(310, 175, 279, 169);

	final JProgressBar progressBar = new JProgressBar();
	// progressBar.setBounds(320, 215, 248, 30);
	progressBar.setBounds(320, 215, 240, 20);
	progressBar.setBackground(Color.decode("#ded7d7"));
	//progressBar.setBackground(Color.decode("#7fa8ce"));

	// progressBar.setUI(new javax.swing.plaf.metal.MetalProgressBarUI());

	progressBar.setUI(new javax.swing.plaf.metal.MetalProgressBarUI() {
		protected Color getSelectionBackground() {
		    return Color.decode("#7fa8ce");
		}

		// protected Color getSelectionForeground() { return
		// Color.decode("#7fa8ce"); }
		protected Color getSelectionForeground() {
		    return Color.white;
		}
	    });
	// com.sun.java.swing.plaf.metal.MetalProgressBarUI());
	// panel_Q4.add(progressBar);
	panelRoot.add(progressBar);

	final JTextField textProgress = new JTextField();
	textProgress.setBounds(350, 235, 248, 30);
	textProgress.setEditable(false);
	textProgress.setBorder(BorderFactory.createEmptyBorder());
	textProgress.setBackground(Color.decode("#F8F8F8"));
	textProgress.setForeground(Color.decode("#5184D5"));

	final JTextField textProgressB = new JTextField();
	textProgressB.setBounds(320, 255, 248, 30);
	textProgressB.setEditable(false);
	textProgressB.setBorder(BorderFactory.createEmptyBorder());
	textProgressB.setBackground(Color.decode("#F8F8F8"));
	textProgressB.setForeground(Color.decode("#E51111"));

	JButton btnTest = new JButton("Test");
	btnTest.setBounds(325, 285, 90, 30);

	btnTest.addActionListener(new ActionListener() {
		public void actionPerformed(ActionEvent e) {

		    TestSettings ts = new TestSettings();
		    System.out.println("ts.testNet()");
		    System.out.println(ts.testNet(61616, "23.20.72.247"));
		    System.out.println("ts.testFiles()");
		    System.out.println(ts.testFiles("/etc/"));

		    String testResult = "";
		    // textProgress.setText("sdlfj");
		    // if(ts.testNet(223,"10.10.10.139")) {
		    if (ts.testNet(61616, "23.20.72.247")) {
			testResult = testResult + ("Network OK,");
		    } else {
			testResult = testResult + ("Network BAD,");
		    }

		    if (ts.testFiles("/etc/hots")) {
			testResult = testResult + ("File OK");
		    } else {
			testResult = testResult + ("File BAD");
		    }
		    textProgressB.setText(testResult);
		    textProgressB.setText(testResult);
		    // textProgress.setText( System.getProperty("os.name"));

		}
	    });

	JButton btnAddsystem = new JButton("Create");
	btnAddsystem.setBounds(315, 305, 90, 30);
	btnAddsystem.setVisible(true);

	UIDefaults def = new UIDefaults();
	def.put("Button.contentMargins", new Insets(0, 0, 0, 0));
	btnAddsystem.putClientProperty("Nimbus.Overrides", def);

	panelRoot.add(btnAddsystem);
	panelRoot.setVisible(true);
	panelRoot.revalidate();

	JButton btnCancel = new JButton("Cancel");
	btnCancel.setBounds(500, 285, 90, 30);

	JProgressBar progressBar_1 = new JProgressBar();



//	progressBar_1.setBackground(Color.decode("#7fa8ce"));
	progressBar_1.setBackground(Color.decode("#ded7d7"));
	progressBar_1.setBounds(320, 255, 240, 20);
	progressBar_1.setUI(new javax.swing.plaf.metal.MetalProgressBarUI() {
		protected Color getSelectionBackground() {
		    return Color.decode("#7fa8ce");
		}

		protected Color getSelectionForeground() {
		    return Color.white;
		}
	    });

	panelRoot.add(progressBar_1);

	cBoxKeystore.setBounds(400, 185, 180, 25);
	JLabel keystoreLabel = new JLabel("Keystore");
	keystoreLabel.setBounds(330, 185, 180, 25);

	panelRoot.add(cBoxKeystore);
	panelRoot.add(keystoreLabel);
	// /panel_Q4.add(cBoxKeystore);
	cBoxKeystore.setEnabled(false);
	cBoxKeystore.setEditable(false);

		
	// @@POPULATE from dir listing
	cBoxKeystore.removeAll();
	




/*
	String myPath = ".";
	File folder = new File(myPath);
	File[] listOfFiles = folder.listFiles();
	for (int i = 0; i < listOfFiles.length; i++) {
	    cBoxKeystore.addItem(listOfFiles[i].getName());
	}
	cBoxKeystore.setVisible(true);
*/

	btnAddsystem.addActionListener(new ActionListener() {
		public void actionPerformed(ActionEvent e) {

		    SystemCounter = tabbedPane.getTabCount() - 1;
		    JPanel panel_2 = new JPanel();
		    Vector<JPanel> vP = new Vector<JPanel>();
		    vP.add(panelRoot);
		    JPanel panelSessionN = new JPanel();



		    //			JMSUploader juldr = new JMSUploader();
		    System.out.println("datafiles");

		    /*
		      int ii=0;
		      while(ii< table_DatafilesModel.getRowCount()) {
		      System.out.println("dataFiles");
		      //System.out.println(table_DatafilesModel.getValueAt(ii, 0).toString());
		      if((table_DatafilesModel.getValueAt(ii, 0)!=null))
		      {
		      System.out.println(table_DatafilesModel.getValueAt(ii, 0).toString());
		      }
		      ii++;
		      }
		    */

		 int ii=0;
		 String dataValuesDatafilesN[][] = new String[table_DatafilesModel.getRowCount()][1]; 

		    while(ii< table_DatafilesModel.getRowCount()) {
			if((table_DatafilesModel.getValueAt(ii, 0)!=null)) {
			    dataValuesDatafilesN[ii][0] = (table_DatafilesModel.getValueAt(ii, 0).toString());
			}
			ii++;
		    }
		
		 int iii=0;
		 String dataValuesTargetHostsN[][] = new String[table_TargetHostsModel.getRowCount()][1]; 

		    while(iii< table_TargetHostsModel.getRowCount()) {
			if((table_TargetHostsModel.getValueAt(iii, 0)!=null)) {
			    dataValuesTargetHostsN[iii][0] = (table_TargetHostsModel.getValueAt(iii, 0).toString());
			}
			iii++;
		    }
		


		    /*
		      for (String[] str : dataValuesDatafiles) {
		      for (String strS : str) {
		      if (strS != null) {
		      System.out.println(strS);
		      }
		      }
		      }
		    */

		    int i = 0;
		    while (i < model.getRowCount()) {
			System.out.println("model");
			dataValuesParameters[i][1] = (model.getValueAt(i, 1).toString());
			System.out.println(model.getValueAt(i, 1).toString());
			i++;
		    }

		    //juldr.setSplitter(types[0]);
		    for (String x : types) {
			System.out.println(x);
		    }

		    int targetCounter = 0;
		    String[] destinations = new String[15];
		    System.out.println("targets");
		    for (String[] str : dataValuesTargetHostsN) {
			for (String strS : str) {
			    if (strS != null) {
				System.out.println(strS);
				destinations[targetCounter] = strS;
				targetCounter++;
			    }
			}
		    }
		    //juldr.setDestination(destinations);

		    System.out.println("params");
		    for (String[] str : dataValuesParameters) {
			for (String strS : str) {
			    if (strS != null) {
				// if(strS.equals("record-format"))
				if (strS.equals("CSV")) {
				    // set CVS juldr here
				    System.out.println("");
				    System.out.println(strS);
				}
				// System.out.println(strS);
			    }
			}
		    }

		    String dests[] = { "", "" };
		    dests[0] = (String) table_TargetHosts.getModel().getValueAt(0, 0);

		    //	juldr.setDestination(dests);
		    //	juldr.setFile(new File((String) table_Datafiles.getModel() .getValueAt(0, 0)));

		    // Actual specification of keystore truststore location
		    File keyStoreLocation = new File("CGstore");
		    File trustStoreLocation = new File("CGstore");
		    //juldr.setStoreLocations(keyStoreLocation, trustStoreLocation);
		    //juldr.setInputFormat("CVS");
		    //juldr.setSplitter("/home/craig2/canonical.json");
		    //juldr.setRecursive(true);
		    //juldr.setBase64Encode(true);
		    //juldr.setListenDLQ(true);
		    UploadStatus uls = null;
		    System.out.println(trustStoreLocation.toString());

		    table_TargetHosts.revalidate();
		    table_Datafiles.revalidate();


		    storedOCfg.addTargets("Session", dataValuesTargetHostsN);
		    //storedOCfg.addTargets("Session", dataValuesTargetHosts);
		    //storedOCfg.addDatafiles("Session", dataValuesDatafiles);
		    storedOCfg.addDatafiles("Session", dataValuesDatafilesN);
		    storedOCfg.addParam("Session", dataValuesParameters);
		    storedOCfgRest.addTargets("Session", dataValuesTargetHosts);
		    storedOCfgRest.addDatafiles("Session", dataValuesDatafiles);
		    storedOCfgRest.addParam("Session", dataValuesParameters);

		    System.out.println("parameterTableSize");
		    System.out.println("sizeOf parameter table"
				       + table_Datafiles.getModel().getRowCount());

		    System.out.println("parameterTableSize");
		    stateSaveHM.put("targethost", (String) table_TargetHosts .getModel().getValueAt(0, 0));

		
		    dtue.addLogArea(logArea);
		    dtue.addLogArea(logAreaDLQ);
		    // create new session

		    //@@@dtue.addSessionID("Session_" + SystemCounter, SystemCounter + 1);
		    dtue.addSessionID("Session_" + TabCounter, TabCounter + 1);
		    // save state of template
		    saveState(storedOCfg, "Session_" + TabCounter, "save");

		    ArrayList<String> sysParam = new ArrayList<String>();
		    // sysParam.add(fj);
		    sysParam.add(textField_4.getText());

		    dtueV.add(dtue);

		    dtue.addTabRef(tabbedPane, false);
		    panelSessionN = dtue.getPanel();

		    //tabbedPane.addTab("Session_" + SystemCounter, null, panelSessionN, null);
		    tabbedPane.addTab("Session_" + TabCounter, null, panelSessionN, null);
		    //tabbedPane.setTabComponentAt(SystemCounter +1, new ButtonTabComponent(tabbedPane, "BLUE"));
		    tabbedPane.setTabComponentAt(SystemCounter +1, new ButtonTabComponent(tabbedPane, "BLUE"));
		    SystemCounter++;
		    TabCounter++;
		    tabbedPane.setSelectedIndex(SystemCounter);
		    tabbedPane.revalidate();

		}

	    });

	JPanel panel_7 = new JPanel();
	panel_7.setLayout(null);
	JButton btnScp = new JButton("SCP");

	// capability removed
	btnScp.addActionListener(new ActionListener() {
		public void actionPerformed(ActionEvent e) {

		    // ScpFrom ScpFromB = new ScpFrom();
		    // Thread scpThread = new Thread(ScpFromB);
		    // scpThread.start();

		}
	    });

	btnScp.setBounds(62, 72, 117, 25);
	// add SCP tab
	panel_7.add(btnScp);

	// tabbedPane.setBackgroundAt(2, Color.LIGHT_GRAY);
	logArea.setText("...");
	logArea.setEditable(false);
	// logArea.setLineWrap(true);
	logArea.setBounds(0, 0, 10, 10);
	// logArea.setLocation(411, 122);
	// logArea.setVisible(true);

	JPanel panelLogs = new JPanel();
	JScrollPane scrollPanelog = new JScrollPane();
	scrollPanelog = new JScrollPane();
	scrollPanelog.setMaximumSize(new Dimension(600, 355));
	scrollPanelog.setMinimumSize(new Dimension(600, 355));
	scrollPanelog.setPreferredSize(new Dimension(600, 355));
	scrollPanelog.setViewportView(logArea);

	scrollPanelog.setBounds(0, 0, 10, 10);
	panelLogs.setBounds(0, 0, 200, 200);

	panelLogs.add(scrollPanelog);

	// tabbedPane.addTab("Logs", null, panelLogs, null);

	JMenuBar menuBar = new JMenuBar();
	frame.setJMenuBar(menuBar);
	frame.setMaximumSize(new Dimension(600, 455));
	frame.setMinimumSize(new Dimension(600, 455));
	frame.setPreferredSize(new Dimension(600, 455));

	JMenu mnControl = new JMenu("File");
	menuBar.add(mnControl);

	JMenuItem mntmExit = new JMenuItem("Exit");
	mntmExit.addActionListener(new exitApp());


	JMenu mnConfiguration = new JMenu("Window");
	menuBar.add(mnConfiguration);

	JMenuItem mntmKeymaintenance = new JMenuItem("New");
	mntmKeymaintenance.addActionListener(new ActionListener() {
		public void actionPerformed(ActionEvent e) {
		    /*
		      JPanel panel_2 = new JPanel();
		      Vector<JPanel> vP = new Vector<JPanel>();
		      vP.add(panelRoot);
		      JPanel panelSessionN = new JPanel();

		      JMSUploader juldr = new JMSUploader();
		      System.out.println("datafiles");
		      for (String[] str : dataValuesDatafiles) {
		      for (String strS : str) {
		      if (strS != null) {
		      System.out.println(strS);
		      juldr.setFile(new File(strS));
		      }
		      }
		      }

		      int targetCounter = 0;
		      String[] destinations = new String[15];
		      System.out.println("targets");
		      for (String[] str : dataValuesParameters) {
		      for (String strS : str) {
		      if (strS != null) {
		      System.out.println(strS);
		      destinations[targetCounter] = strS;
		      targetCounter++;
		      }
		      }
		      }
		      juldr.setDestination(destinations);

		      System.out.println("params");
		      for (String[] str : dataValuesParameters) {
		      for (String strS : str) {
		      if (strS != null) {
		      // if(strS.equals("record-format"))
		      if (strS.equals("CSV")) {
		      // set CVS juldr here
		      System.out.println("");
		      System.out.println(strS);
		      }
		      // System.out.println(strS);
		      }
		      }
		      }

		      String dests[] = { "", "" };
		      dests[0] = (String) table_TargetHosts.getModel().getValueAt(0,
		      0);

		      juldr.setDestination(dests);
		      juldr.setFile(new File((String) table_Datafiles.getModel()
		      .getValueAt(0, 0)));

		      // Actual specification of keystore truststore location
		      File keyStoreLocation = new File("CGstore");
		      File trustStoreLocation = new File("CGstore");
		      juldr.setStoreLocations(keyStoreLocation, trustStoreLocation);
		      juldr.setInputFormat("CVS");
		      juldr.setSplitter("/home/craig2/canonical.json");
		      juldr.setRecursive(true);
		      juldr.setBase64Encode(true);
		      juldr.setListenDLQ(true);
		      UploadStatus uls = null;
		      System.out.println(trustStoreLocation.toString());

		      table_TargetHosts.revalidate();
		      table_Datafiles.revalidate();

		      storedOCfg.addTargets("Session", dataValuesTargetHosts);
		      storedOCfg.addDatafiles("Session", dataValuesDatafiles);
		      storedOCfg.addParam("Session", dataValuesParameters);
		      storedOCfgRest.addTargets("Session", dataValuesTargetHosts);
		      storedOCfgRest.addDatafiles("Session", dataValuesDatafiles);
		      storedOCfgRest.addParam("Session", dataValuesParameters);

		      System.out.println("parameterTableSize");
		      System.out.println("sizeOf parameter table"
		      + table_Datafiles.getModel().getRowCount());

		      System.out.println("parameterTableSize");
		      stateSaveHM.put("targethost", (String) table_TargetHosts
		      .getModel().getValueAt(0, 0));

		      DTUelements dtue = new DTUelements();
		      // create new session
		      dtue.addSessionID("Session_" + SystemCounter, SystemCounter + 1);
				
		      // save state of template
		      saveState(storedOCfg, "Session_" + SystemCounter, "save");

		      ArrayList<String> sysParam = new ArrayList<String>();
		      // sysParam.add(fj);
		      sysParam.add(textField_4.getText());
		      dtue.addTabRef(tabbedPane, false);
		      panelSessionN = dtue.getPanel();
			
				
		      dtueV.add(dtue);
		      System.out.println("dtueV.size()");
		      System.out.println(dtueV.size());
		      System.out.println(dtueV.get(0).SessionNumber);

		      // @@where Session name is generated
		      tabbedPane.addTab("Session_" + SystemCounter, null, panelSessionN, null);

		      // tabbedPane.setTabComponentAt(tabbedPane.getSelectedIndex(),
		      // new ButtonTabComponent(tabbedPane, "GREEN"));
		      tabbedPane.setTabComponentAt(SystemCounter+ 1, new ButtonTabComponent(tabbedPane, "BLUE"));

		      SystemCounter++;
		      tabbedPane.setSelectedIndex(SystemCounter);
		      tabbedPane.revalidate();

		      // CreateSystem();
		      // JPanel panel_2 = new JPanel();

		      // tabbedPane.addTab("new", null, panel_2, null);
		      */
		}
	    });

	JMenuItem mntmOpen = new JMenuItem("Open");
	mntmOpen.addActionListener(new ActionListener() {
		String restoreFilePath = new String();

		public void actionPerformed(ActionEvent e) {
		    //BasicFileChooserUI ui = (BasicFileChooserUI)chooser.getUI();
		    //Action folder = ui.getNewFolderAction();
		    //folder.setEnabled(false);

		    UIManager.put("FileChooser.readOnly", Boolean.TRUE); 
		    JFileChooser chooser = new JFileChooser();

			SystemCounter = tabbedPane.getTabCount() - 1;
		    chooser.setCurrentDirectory(new File(new String(System.getProperty("user.dir"))));

		    FileNameExtensionFilter filter = new FileNameExtensionFilter( "session", "session");
		    chooser.setFileFilter(filter);
		    int returnVal = chooser.showOpenDialog(textField_1);
		    if (returnVal == JFileChooser.APPROVE_OPTION) {
			System.out.println(chooser.getSelectedFile()
					   .getAbsolutePath());
			restoreFilePath = (chooser.getSelectedFile()
					   .getAbsolutePath());
		    }

		    // //CREATE a new system from saved state

		    JPanel panel_2 = new JPanel();
		    Vector<JPanel> vP = new Vector<JPanel>();
		    vP.add(panelRoot);

		    JPanel panelSessionN = new JPanel();

		    //				JMSUploader juldr = new JMSUploader();

                    int ii=0;
                 String dataValuesDatafilesN[][] = new String[table_DatafilesModel.getRowCount()][1];

                    while(ii< table_DatafilesModel.getRowCount()) {
                        if((table_DatafilesModel.getValueAt(ii, 0)!=null)) {
                            dataValuesDatafilesN[ii][0] = (table_DatafilesModel.getValueAt(ii, 0).toString());
                        }
                        ii++;
                    }

                 int iii=0;
                 String dataValuesTargetHostsN[][] = new String[table_TargetHostsModel.getRowCount()][1];

                    while(iii< table_TargetHostsModel.getRowCount()) {
                        if((table_TargetHostsModel.getValueAt(iii, 0)!=null)) {
                            dataValuesTargetHostsN[iii][0] = (table_TargetHostsModel.getValueAt(iii, 0).toString());
                        }
                        iii++;
                    }





		    System.out.println("datafiles");
		    //for (String[] str : dataValuesDatafiles) {
		    for (String[] str : dataValuesDatafilesN) {
			for (String strS : str) {
			    if (strS != null) {
				System.out.println(strS);
				//		juldr.setFile(new File(strS));
			    }
			}
		    }

		    int targetCounter = 0;
		    String[] destinations = new String[15];
		    System.out.println("targets");
		    for (String[] str : dataValuesTargetHostsN) {
			for (String strS : str) {
			    if (strS != null) {
				System.out.println(strS);
				destinations[targetCounter] = strS;
				targetCounter++;
			    }
			}
		    }
		    //juldr.setDestination(destinations);

		    System.out.println("params");
		    for (String[] str : dataValuesParameters) {
			for (String strS : str) {
			    if (strS != null) {
				// if(strS.equals("record-format"))
				if (strS.equals("CSV")) {
				    // set CVS juldr here
				    System.out.println("");
				    System.out.println(strS);
				}
				// System.out.println(strS);
			    }
			}
		    }

		    String dests[] = { "", "" };
		    //dests[0] = (String) table_TargetHosts.getModel().getValueAt(0, 0);
		    //@@@dests[0] = (String) table_TargetHosts.getModel().getValueAt(0, 0);
		    UploadStatus uls = null;

		    table_TargetHosts.revalidate();
		    table_Datafiles.revalidate();
		    // table.revalidate();



		    storedOCfg.addTargets("Session", dataValuesTargetHostsN);
		    storedOCfg.addDatafiles("Session", dataValuesDatafilesN);
		    storedOCfg.addParam("Session", dataValuesParameters);

		    System.out.println("parameterTableSize");
		    System.out.println("sizeOf parameter table"
				       + table_Datafiles.getModel().getRowCount());

		    System.out.println("parameterTableSize");

		    DTUelements dtue = new DTUelements();

		    dtue.addLogArea(logArea);
		    // create new session
		    //@@@dtue.addSessionID("Session_" + SystemCounter, SystemCounter + 1);
		    //@@@saveState(storedOCfgRest, "Session_" + SystemCounter, restoreFilePath);
		    dtue.addSessionID("Session_" + TabCounter, SystemCounter + 1);
		    saveState(storedOCfgRest, "Session_" + TabCounter, restoreFilePath);

		    final String dataValuesParameters[][] = {
			{ "input-format", "read" }, { "base64Encode", "false" },
			{ "record-format", "TEXTLINE" },
			{ "record header lines", "1" }, { "batch size", "100" },
			{ "listen on DLQ", "false" },
			{ "interactive option", "false" } };

		    ArrayList<String> sysParam = new ArrayList<String>();
		    sysParam.add(textField_4.getText());

		    // @@ where new tab is added

		    dtue.addTabRef(tabbedPane, true);
		    panelSessionN = dtue.getPanel();
		    // ////
		    dtueV.add(dtue);

		    URL url;
		    try {
			url = new URL("file:///home/craig2/Icon.gif");

			Image image = Toolkit.getDefaultToolkit().createImage(url);
			ImageIcon spinIcon = new ImageIcon(image);
			BufferedImage bi = new BufferedImage(150, 150,
							     BufferedImage.TYPE_INT_ARGB);
			Graphics g = bi.getGraphics();
			g.drawImage(image, 0, 0, null);
			g.dispose();
			ImageIcon staticIcon = new ImageIcon(bi);

			JButton button = new JButton(staticIcon);
			// button.setRolloverIcon(spinIcon);
			// button.setIcon(spinIcon);
			button.setBounds(220, 220, 220, 220);
			button.setLocation(150, 300);

			// @@where Session name is generated
			//tabbedPane.addTab("Session_" + SystemCounter, null, panelSessionN, null);
			tabbedPane.addTab("Session_" + TabCounter, null, panelSessionN, null);
			//					tabbedPane.setTabComponentAt(SystemCounter + 1, new ButtonTabComponent(tabbedPane, "BLUE"));
			tabbedPane.setTabComponentAt(SystemCounter +1 , new ButtonTabComponent(tabbedPane, "BLUE"));

			SystemCounter++;
			TabCounter++;
			tabbedPane.setSelectedIndex(SystemCounter);
			tabbedPane.revalidate();

		    } catch (MalformedURLException e2) {
			// TODO Auto-generated catch block
			e2.printStackTrace();
		    }

		}
	    });
	JMenuItem mntmManual = new JMenuItem("Manual(pdf)");
	//	JMenuItem mntmManual = new JMenuItem("Manual");

	mntmManual.addActionListener(new ActionListener() {
		public void actionPerformed(ActionEvent e) {
		    System.out.println(System.getProperty("os.name")); 
		    System.out.println(System.getProperty("os.name")); 
		    System.out.println(System.getProperty("user.dir"));


		    System.out.println("parameterTableSize");
		    System.out.println("sizeOf parameter table" + table_Datafiles.getModel().getRowCount());

		    //@@@	ManualDisplay jpd = new ManualDisplay("DTU.pdf");
		    PDFReader jpd = new PDFReader();
			
		    try
			{
			    String[] pdfArgs = new String[2];
			    pdfArgs[0] = "PDFReader";
			    pdfArgs[1] = "DTU.pdf";
			    jpd.main(pdfArgs);
			}
		    catch (Exception pdfe)
			{
			    pdfe.printStackTrace();
			}

		    /*
		      try
		      {
		      jpd.openPDFFile("DTU.pdf", "");
		      }
		      catch (Exception pdfe)
		      {
		      pdfe.printStackTrace();
		      }

		    */

		    //@@@	
		    jpd.setDefaultCloseOperation(DISPOSE_ON_CLOSE);
	

		    /*
		      String myPath = "./keystore/";
		      File folder = new File(myPath);
		      File[] listOfFiles = folder.listFiles();
		      for (int i = 0; i < listOfFiles.length; i++) {
		      cBoxKeystore.addItem(listOfFiles[i].getName());
		      }

		      System.out.println("parameterTableSize");
		      System.out.println("sizeOf parameter table"
		      + table_Datafiles.getModel().getRowCount());

		      ManualDisplay jpd = new ManualDisplay("DTU.pdf");
		      jpd.setDefaultCloseOperation(DISPOSE_ON_CLOSE);
	
				
		      System.out.println("parameterTableSize");
		      // stateSaveHM.put("targethost",
		      // textField_4.getText()+(String)table_TargetHosts.getModel().getValueAt(0,0));
		      // stateSaveHM.put("targethost", (String)
		      // table_TargetHosts.getModel()
		      // .getValueAt(0, 0));

		      // s aveState(stateSaveHM);
		      saveState(storedOCfg, "Session_" + SystemCounter, "save");

		      System.out.println("stateSaved");
		    */
		}
	    });

	JMenuItem mntmLogs = new JMenuItem("Logs");
	JMenuItem mntmDLQ = new JMenuItem("DLQ");
	JMenuItem mntmSession_1 = new JMenuItem("Session_1");
	JMenuItem mntmSession_2 = new JMenuItem("Session_2");
	//		JMenuItem mntmManual = new JMenuItem("Manual(pdf)");

	mntmLogs.addActionListener(new ActionListener() {
		public void actionPerformed(ActionEvent e) {
		    /*
		     * JFrame frame2 = new JFrame(); // CreateSystem(); // JPanel
		     * panel_2 = new JPanel(); frame2.setBounds(800, 100, 640, 445);
		     * frame2.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
		     * frame2.setVisible(true);
		     */

		    // //
		    JFrame frame2 = new JFrame();
		    frame2.setTitle("Log Viewer");
		    // CreateSystem();
		    // JPanel panel_2 = new JPanel();
		    frame2.setBounds(800, 100, 640, 445);
		    // frame2.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		    frame2.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
		    frame2.setVisible(true);


		 Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
	if((frame.getX()+1000 < screenSize.getWidth())) {
	frame2.setLocation((frame.getX()+100),frame.getY());
	} else {
	frame2.setLocation((frame.getX()+10),frame.getY());
	}





		    // tabbedPane.setBackgroundAt(2, Color.LIGHT_GRAY);
		    logArea.setText("...");
		    logArea.setEditable(false);
		    // logArea.setLineWrap(true);
		    logArea.setBounds(0, 0, 10, 10);
		    // logArea.setLocation(411, 122);
		    // logArea.setVisible(true);
		    JPanel panelLogs = new JPanel();

		    JScrollPane scrollPanelog = new JScrollPane();
		    scrollPanelog = new JScrollPane();
		    scrollPanelog.setMaximumSize(new Dimension(600, 355));
		    scrollPanelog.setMinimumSize(new Dimension(600, 355));
		    scrollPanelog.setPreferredSize(new Dimension(600, 355));
		    scrollPanelog.setViewportView(logArea);

		    scrollPanelog.setBounds(0, 0, 10, 10);
		    panelLogs.setBounds(0, 0, 200, 200);

		    panelLogs.add(scrollPanelog);

		    // tabbedPane.addTab("Logs", null, panelLogs, null);
		    frame2.add(panelLogs);

		}
	    });

	mntmDLQ.addActionListener(new ActionListener() {
		public void actionPerformed(ActionEvent e) {
/*
		    JFrame frame3 = new JFrame();
		    frame3.setTitle("DLQ Viewer");

		    frame3.setBounds(100, 600, 640, 445);
		    frame3.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
		    frame3.setVisible(true);

		    // tabbedPane.setBackgroundAt(2, Color.LIGHT_GRAY);
		    logAreaDLQ.setEditable(false);
		    // logArea.setLineWrap(true);
		   /////////////////////////////////////////// logAreaDLQ.setBounds(0, 0, 10, 10);
		    // logArea.setLocation(411, 122);
		    // logArea.setVisible(true);
		    JPanel panelLogsDLQ = new JPanel(new BorderLayout());


	     
		    JScrollPane scrollPanelogDLQ = new JScrollPane();
		    scrollPanelogDLQ = new JScrollPane();
		    scrollPanelogDLQ.setMaximumSize(new Dimension(1600, 355));
		    scrollPanelogDLQ.setMinimumSize(new Dimension(1000, 355));
		    scrollPanelogDLQ.setPreferredSize(new Dimension(1600, 355));
				
		    logAreaDLQ.setText(DLQfield);
		    scrollPanelogDLQ.setViewportView(logAreaDLQ);

		    System.out.println("DLQfield");
		    System.out.println(DLQfield);


		    //scrollPanelogDLQ.setBounds(0, 0, 10, 10);
		    //@@@@panelLogsDLQ.setBounds(0, 0, 1200, 1200);

		    panelLogsDLQ.add(scrollPanelogDLQ);

		    // tabbedPane.addTab("Logs", null, panelLogs, null);
		    frame3.add(panelLogsDLQ);
		    // tabbedPane.addTab("new", null, panel_2, null);
*/

		    JFrame frame4 = new JFrame();
		    frame4.setTitle("DLQ message downloader");
		 Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
	screenSize.getHeight();
	screenSize.getSize();
	screenSize.getWidth();

				
		    //frame4.setResizable(false);
		    frame4.setResizable(true);
		    //frame4.setBounds(100, 600, 640, 445);
		    frame4.setBounds(100, 600, 640, 445);
		    frame4.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
		    frame4.setVisible(true);


	//if((frame.getX()+1000 < screenSize.getWidth()) && (frame.getY()+2000 < screenSize.getHeight())) {
	if((frame.getY()+500 < screenSize.getHeight())) {
	frame4.setLocation(frame.getX(),frame.getY()+50);
	} else {
	frame4.setLocation(frame.getX(),frame.getY()+20);
	}
/*
	if((frame.getX()+1000 < screenSize.getWidth()) && (frame.getY()+2000 < screenSize.getHeight())) {
	frame4.setLocation((frame.getX()+1000),(frame.getY()+2000));
	} else {
	frame4.setLocation((frame.getX()+100),(frame.getY()+200));
	}
*/

		    // tabbedPane.setBackgroundAt(2, Color.LIGHT_GRAY);
		    logAreaDLQMsg.setEditable(false);
		    // logArea.setLineWrap(true);
		    //@@@@logAreaDLQMsg.setBounds(0, 220, 100, 100);
		    // logArea.setLocation(411, 122);
		    // logArea.setVisible(true);
		    JPanel panelLogsDLQMsg = new JPanel();

		    JScrollPane scrollPanelogDLQMsg = new JScrollPane();
		    scrollPanelogDLQMsg = new JScrollPane();
		   // scrollPanelogDLQMsg.setMaximumSize(new Dimension(500, 255));
		    //panelLogsDLQMsg.setMaximumSize(new Dimension(1000, 1255));
		    //panelLogsDLQMsg.setMinimumSize(new Dimension(500, 1255));
		    //panelLogsDLQMsg.setPreferredSize(new Dimension(1000, 1255));

		    //MessageID view
		    scrollPanelogDLQMsg.setMaximumSize(new Dimension(1600, 255));
		    scrollPanelogDLQMsg.setMinimumSize(new Dimension(1500, 255));
		    scrollPanelogDLQMsg.setPreferredSize(new Dimension(1000, 255));
		    //scrollPanelogDLQMsg.setLocation(0,400);
			
		    scrollPanelogDLQMsg.setViewportView(logAreaDLQMsg); 
		    //scrollPanelogDLQMsg.setBounds(10, 230, 100, 100);
		    //@@@scrollPanelogDLQMsg.setBounds(10, 230, 100, 100);
		    //@@@@panelLogsDLQMsg.setBounds(10, 230, 100, 100);

		    //@@@@panelLogsDLQMsg.add(scrollPanelogDLQMsg);
			

		  //  logAreaDLQMsg.setText("OrderKey|OrderStatus|OrderPrice|OrderDate|OrderPriority|Clerk|ShipPriority|OrderComment|LineNumber|Quantity|ExtendedPrice|Discount|Tax|ReturnFlag|LineStatus|ShipDate|CommitDate|ReceiptDate|ShipInstructions|ShipMode|LineItemComment|CustomerName|CustomerNation|PartName|PartMfgr|PartType|SupplierName|SupplierNation");
	
		    JPanel btnJP = new JPanel();
			
		    btnJP.setMaximumSize(new Dimension(100, 100));
		    btnJP.setMinimumSize(new Dimension(100, 100));
		    btnJP.setPreferredSize(new Dimension(100, 100));

/*	
		    String columnNamesDLQMsg[] = { "Correlation ID","Message ID","Timestamp","Destination" };
		    //	final String dataValuesDLQMsg[][] = new String[15][10];
		    final String dataValuesDLQMsg[][] = {
			{ "322323", "ID:FWHGKQ1-50861-1392820272960-0:9:1:1:36","2014-02-19 18:20:05:526 UTC","queue://com.deleidos.rtws.parse" },
			{ "322323", "ID:FWHGKQ1-50861-1392820272960-0:9:1:1:36","2014-02-19 18:20:05:526 UTC","queue://com.deleidos.rtws.parse" },
			{ "322323", "ID:FWHGKQ1-50861-1392820272960-0:9:1:1:36","2014-02-19 18:20:05:526 UTC","queue://com.deleidos.rtws.parse" },
			{ "322323", "ID:FWHGKQ1-50861-1392820272960-0:9:1:1:36","2014-02-19 18:20:05:526 UTC","queue://com.deleidos.rtws.parse" }
		    };
				
		//final JTable table_DLQMsg = new JTable(dataValuesDLQMsg, columnNamesDLQMsg);
*/
             	final DefaultTableModel table_DLQMsgModel = new DefaultTableModel(dataValuesDLQMsg, columnNamesDLQMsg);
		table_DLQMsg.setModel(table_DLQMsgModel);

 
		    table_DLQMsg.setToolTipText("Click to select message");
		    //@@@@table_DLQMsg.setBounds(1, 12, 200, 604);
		    //table_DLQMsg.setBounds(1, 12, 200, 404);
		    table_DLQMsg.setPreferredScrollableViewportSize(new Dimension(12, 18));
		    table_DLQMsg.setFillsViewportHeight(true);
				
		    JScrollPane scrollPaneParameters = new JScrollPane(table_DLQMsg);
				
		    JButton btnRefreshDLQ = new JButton("Refresh");
		    JButton btnSaveAllMessages = new JButton("Save All Messages");
		    JButton btnSaveMessage = new JButton("Save Message");
		    JComboBox dlqHosts = new JComboBox();

		    dlqHosts.addItem("54.211.155.171");
 

		    ///MessageID view
				
		    scrollPaneParameters.setMaximumSize(new Dimension(200, 355));
		    scrollPaneParameters.setMinimumSize(new Dimension(100, 55));
		    scrollPaneParameters.setPreferredSize(new Dimension(200, 255));
		    //@@@scrollPaneParameters.setLocation(0,400);
				
		    //scrollPaneParameters.setBounds(0, 0, 278, 167);
		    //scrollPaneParameters.setBounds(0, 0, 200, 100);
		    //scrollPaneParameters.setBounds(0, 0, 100, 100);
		    scrollPaneParameters.setViewportBorder(new SoftBevelBorder( BevelBorder.LOWERED, null, null, null, null));
		    JDialog jd = new JDialog();
		 //@@   
		    frame4.add(scrollPaneParameters, BorderLayout.NORTH);	

		    btnJP.add(btnRefreshDLQ);
		    btnJP.add(btnSaveMessage);
		    btnJP.add(btnSaveAllMessages);
		    btnJP.add(dlqHosts);


		    frame4.add(btnJP, BorderLayout.SOUTH);
		    //frame4.add(panelLogsDLQMsg, BorderLayout.SOUTH);
		    frame4.add(scrollPanelogDLQMsg, BorderLayout.CENTER);

		   // btnJP.add(btnSaveMessage);
		   // btnJP.add(btnSaveAllMessages);
		   // frame4.add(btnJP);

/*

			((DefaultTableModel)table_Datafiles.getModel()).insertRow(0, new Object[]{valueAdded});
			table_Datafiles.revalidate();


*/


		    //btnSaveMessage.addActionListener(new ActionListener() {
		    btnRefreshDLQ.addActionListener(new ActionListener() {
			    public void actionPerformed(ActionEvent e) {
			

				/*
				  SwingUtilities.invokeLater(new Runnable() {
				  @Override
				  public void run() {
				  QueueListener ql = new QueueListener();
				  }
				  });
				*/


			System.out.println("DLQHashMapIN.size()");
			System.out.println(DLQHashMap.size());

				//@@ pass in a dtuMainRef here
				//@@ add a method for updating DS Hmap<Integer,String>
				//@@ for message ID and MessagePayload
				//@@ have this be the source of the DLQ tap pane	

				//QueueListener ql = new QueueListener();
				//ql.addDTUmainRef(dtuMainRef);
			
				if(DLQHashMap.size() > 0) 
				{
				//logAreaDLQMsg.setText(DLQHashMap.toString()); 


 	   for (String key : DLQHashMap.keySet()) {
                            String value = DLQHashMap.get(key);
//		   	    logAreaDLQMsg.setText(key+" "+value); 

			((DefaultTableModel)table_DLQMsg.getModel()).insertRow(0, new Object[]{key});
                        }
		//	Integer sizeHM = DLQHashMap.size();

			
		//	((DefaultTableModel)table_DLQMsg.getModel()).insertRow(0, new Object[]{sizeHM.toString()});
			table_DLQMsg.revalidate();
			

//				logAreaDLQMsg.setText(DLQHashMap.getClass().getName()); 
				System.out.println("DLQ");
				((PopupListenerC) popupListenerC).addDataHM(DLQHashMap);
				}


			    }
			});








		}
	    });

	// mnConfiguration.add(mntmKeymaintenance);
	// mnControl.add(mntmKeymaintenance);
	mnControl.add(mntmOpen);
	//		mnControl.add(mntmSave);
	mnControl.add(mntmExit);
	mnConfiguration.add(mntmLogs);
	mnConfiguration.add(mntmDLQ);
	// mnConfiguration.add(mntmDLQ);
	// mnConfiguration.add(mntmSession_1);
	// mnConfiguration.add(mntmSession_2);

	JMenu mnHelp = new JMenu("Help");
	menuBar.add(mnHelp);
	mnHelp.add(mntmManual);

	JMenuItem mntmAbout = new JMenuItem("About");
	mnHelp.add(mntmAbout);
	frame.pack();

    }

    public static void saveState(StoreObjectConfig soc, String DTUSessionID,
				 String Action) {

	FileOutputStream fos = null;
	ObjectOutputStream oos = null;
	try {

	    System.out.println("DTUSessionID in saveState");
	    System.out.println(DTUSessionID);

	    if (Action.equals("save")) {

		// output Live Session
		fos = new FileOutputStream(DTUSessionID + ".session");
		oos = new ObjectOutputStream(fos);
		oos.writeObject((StoreObjectConfig) soc);
		oos.flush();
		oos.close();
		fos.close();

	    } else {

		// input Save Session
		FileInputStream fis = new FileInputStream(Action);
		ObjectInputStream ois = new ObjectInputStream(fis);
		StoreObjectConfig restoredOCfg = new StoreObjectConfig();
		restoredOCfg = (StoreObjectConfig) ois.readObject();

		// System.out.println("restoredOCfg.toString()");

		// output Saved Session
		fos = new FileOutputStream(DTUSessionID + "TimeStamp.session");
		oos = new ObjectOutputStream(fos);
		oos.writeObject((StoreObjectConfig) restoredOCfg);

		oos.flush();
		oos.close();
		fos.close();
		ois.close();
		fis.close();
	    }

	} catch (Exception e) {
	    // TODO Auto-generated catch block
	    e.printStackTrace();
	}

    }

    public static ArrayList listFile(String pathname) {
	File f = new File(pathname);
	File[] listfiles = f.listFiles();
	String listing = "";
	ArrayList<String> dList = new ArrayList<String>();
	for (int i = 0; i < listfiles.length; i++) {
	    if (listfiles[i].isDirectory()) {
		File[] internalFile = listfiles[i].listFiles();
		for (int j = 0; j < internalFile.length; j++) {
		    System.out.println(internalFile[j]);
		    listing = (internalFile[j]).toString();
		    dList.add(listing);
		    if (internalFile[j].isDirectory()) {
			String name = internalFile[j].getAbsolutePath();
			listFile(name);
		    }

		}
	    } else {
		System.out.println(listfiles[i]);
	    }

	}

	return dList;
    }
}

final class updateUI extends Thread {
    boolean progressStatus = false;

    public boolean getStatusI(JProgressBar jpbIn) {
	return progressStatus;
    }

    public void run() {

	UploadStatus ulsMon = null;

	if (ulsMon.INSTANCE != null) {
	    while (true) {
		System.out.println("status");
		try {

		    // getTabProgress(
		    // statusV.add(ulsMon.INSTANCE.getDeadLetterQueueMessages());
		    // Thread.sleep(1000);

		} catch (Exception e) {
		    System.err.println("Error reading dead letter queue message.  Stopping listener for this connection.");
		}

		// true
	    }
	}

    }
}// end class

class tpUI extends javax.swing.plaf.basic.BasicTabbedPaneUI {
    protected AbstractRegionPainter.PaintContext getPaintContext() {
	return new AbstractRegionPainter.PaintContext(null);
    }

    protected void doPaint(Graphics2D g, JComponent c, int width, int height,
			   Object[] extendedCacheKeys) {
	// g.setColor(bgColor);
	g.fillRect(0, 0, width, height);
    }

}

class InsertRowsActionAdapter implements ActionListener {

    DTUmain adaptee;

    InsertRowsActionAdapter(DTUmain adaptee) {
	this.adaptee = adaptee;
    }

    public void actionPerformed(ActionEvent e) {
    }
}




